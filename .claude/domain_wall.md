### 개념과 격벽을 통한 유연한 설계

* 소프트웨어 개발에서 중요한 두 가지 개념, 개념과 격벽

#### 개념 (Concept)
  - 정의: 시스템의 특정 기능을 나타내는 추상적인 단위 또는 도메인 객체.
  - 예시: 웹툰 서비스에서 '결제', '구매', '연재', '작가' 등이 개념이 될 수 있습니다. 


#### 격벽 (Wall)
 - 정의: 개념들 사이의 경계로, 접근 제어 및 통제 역할을 합니다.
 - 목표: 개념과 격벽이 잘 설정되면, 한 개념에 변경이 발생했을 때 해당 개념과 관련된 코드만 수정됩니다.
 - 반대 사례: 격벽이 잘못 설정되면, 전혀 다른 개념 그룹의 코드가 수정되거나 같은 개념 그룹 내에서도 복잡성이 증가할 수 있습니다.
 - 기능: 개념 간의 책임 범위를 명확히 분리하여, 한 개념의 변경이 다른 개념에 미치는 영향을 줄입니다. 

#### 대출 - 사례
- 신청, 실행, 상환을 대출의 행위 정도로 바라봤으나 대출을 수정했을 때, 신청 서비스, 실행 서비스, 상환 서비스가 대출의 수정에 모두 영향을 받았고 대출이라는 개념을 너무 크게 잡은 것이 아닌가하는 의심이 발생 ->  행위로 분리했던 신청, 실행, 상환을 행위가 아니라 대출과 같은 크기의 개념으로 뽑아냄 상환이 실패하면 상환 재시도, 추가 이자 등을 실행하게되는데, 이 개념으로 넘어갈 때 까지 상환 개념에서는 상황 성공 혹은 실패 상태가 나왔을 때, 개념적으로 자기의 역할을 다 한 것! 상환 실패에 대한 재시도 연체라는 새로운 개념을 만들어냄. 상환 실패의 결과물로 연체를 만들어 냄. 상환 재시도, 추가 이자 --> 연체 납부와 연체 이자 (행위) 상태는 개념이 아니다. 개념이 상태에 표기되는 것

#### 사례를 통해 개념과 격벽 느껴보기

* 사례1 - 대출 서비스

#### 큰 개념을 작게 만들기

- 이 사례에서 처음에는 대출을 하나의 개념으로 보고, '신청' '실행' '상환' 세가지를 행위로 보았다.

- 이렇게 생각하고 서비스를 구현해보니, '대출' 이라는 개념이 너무 커보였다.

- 개념을 크게 잡으면 변경지점이 넓어지게 된다.

- 즉, 대출이라는 개념에 너무 많은 것들이 의존하게 된다.

#### 대출 서비스의 플로우

1. 대출을 '신청' 한다.

2. 신청이 완료되면 대출이 '실행' 된다.

3. 실제 '대출' 이 일어나게 된다.

4. 이제부터 '상환' 을 해야한다.


#### 서비스 개발을 하다보니 '상환' 도 분리가 필요해 보였다.

- '상환 성공' 과 '상환 실패' 두가지의 개념으로 분리가 되었다.

- 그런데 또, 이러다 보니 '상환 실패' 역시 분리가 필요했다.

- 계속 이런 식으로 요구사항이 늘어나서 계속 커지고 불어 나는 상황이 오게 되었다.

#### 격벽 세우기

- 이럴때는 '격벽'을 세워보자.

- 상환을 성공하는 것과 실패하는 것을 두고 격벽을 세워 보니, '연체' 라는 새로운 개념이 나오게 되었다.

-상환 재시도, 추가 이자 에 대한 것은 '연체' 라는 새로운 개념과 함께 하는 개념이 되었다.

- 개념들의 관계를 격벽을 통해 분리시키는 것이 중요하다.

#### 대출 서비스 사례로 알아본 개념과 격벽 정리

- 하나의 개념이 많이 쓰이면 분리를 검토하자.

- 대출 이라는 개념이 너무 컸기때문에, 그 개념을 분리 했던 것이다.

- 개념을 분리하고나면 흐름이 다른 관점으로 보일 수 있다.

- 상태에 의해 개념이 생기면 격벽을 세워보자

- 개념을 끊어보기 위해 격벽을 세워서 다시 확인 해보자.

- 상태나 행위를 개념으로 착각할 수 있다.

- 외부연동사와 관련된 것들은 우리의 개념이 아니니 우리의 코드로써 관리를 할 수 없는 것이고 외부 연동되는 DB를 통해서 관리를 하는게 합리적으로 보여집니다

